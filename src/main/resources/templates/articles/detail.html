<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title th:text="${article.title}">Article</title>
</head>
<body>
<h2 th:text="${article.title}"></h2>

<p th:if="${article.subTitle != null}" 
   style="font-style: italic; color: gray;"
   th:text="${article.subTitle}"></p>

<p>
  <small>
    by <span th:text="${article.author.name}"></span>,
    <span th:text="${#dates.format(article.createdOn, 'dd MMM yyyy HH:mm')}"></span>
    <span th:if="${article.updatedOn != null}">
      (Updated on <span th:text="${#dates.format(article.updatedOn, 'dd MMM yyyy HH:mm')}"></span>)
    </span>
  </small>
</p>

<p th:text="${article.content}"></p>

<div th:if="${authUser != null and authUser.id == article.author.id}">
  <a th:href="@{'/articles/' + ${article.id} + '/edit'}">Edit</a> |
  <form th:action="@{'/articles/' + ${article.id} + '/delete'}" method="post" style="display:inline;">
    <button type="submit" onclick="return confirm('Are you sure you want to delete this article?')">
      Delete
    </button>
  </form>
</div>

<hr/>
<h3>Comments</h3>
<ul>
  <li th:each="comment : ${comments}">
    <p th:text="${comment.comment}"></p>
    <small>
      â€” <span th:text="${comment.commentor.name}"></span>
      <span th:text="${#dates.format(comment.createdOn, 'dd MMM yyyy HH:mm')}"></span>
    </small>
  </li>
</ul>

<!-- Comment form -->
<hr/>
<h4>Add a Comment</h4>
<form th:action="@{/articles/{id}/comments(id=${article.id})}" method="post">
  <textarea name="comment" rows="3" cols="40" placeholder="Write your comment..." required></textarea><br/>
  <button type="submit">Post Comment</button>
</form>

<a href="/articles">Back to Articles</a>
</body>
</html>
